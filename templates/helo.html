<!DOCTYPE html>
<html>
<head>
 <title>四柱排盘</title>
 <!-- 引入 Bootstrap 和 jQuery 库 -->
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
 <!-- 引入 flatpickr 时间选择器库 -->
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
 <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
 <script src="https://npmcdn.com/flatpickr/dist/l10n/zh.js"></script>
</head>
<body>
 <div class="container">
  <h2>选择出生时间</h2>
  <!-- 时间选择器表单 -->
  <div class="form-group">
   <label for="datetimepicker">选择日期和小时:</label>
   <input type="text" id="datetimepicker" class="form-control" placeholder="选择日期和小时" autocomplete="off">
  </div>
  <!-- 提交按钮 -->
  <button id="submit-date" class="btn btn-primary">提交</button>
  <!-- 显示服务器返回字符串 -->
  <div class="mt-3">
   <label for="response">计算结果:</label>
   <span id="response"></span>
  </div>
 </div>
 <script type="text/javascript">
  // 启用时间选择器
  $('#datetimepicker').flatpickr({
   locale: 'zh',  // 指定语言为中文
   enableTime: true,  // 启用时间选择
   time_24hr: true,  // 时间格式为24小时制
   enableSeconds: false,  // 不显示秒数
   dateFormat: "Y-m-d H:i",  // 指定日期和小时格式
   defaultDate: new Date(),  // 默认选中当前时间
   minDate: "1900-01-01 00:00",  // 最小选中时间为今天
   maxDate: new Date().fp_incr(30),  // 最大选中时间为30天后
  });
  
  // 提交按钮点击事件
  $('#submit-date').click(function() {
   var selectedDate = $('#datetimepicker').val();  // 获取选择的日期和小时
   console.log(selectedDate);  // 调试用，可删除
   // 发送日期和时间到服务器
   $.ajax({
    url: 'http://localhost:9001/api/helo',  // 指定提交的 URL
    type: 'POST',  // 指定提交的方法为 POST
    data: { datetimestr: selectedDate },  // 传递日期和时间数据
    success: function(response) {
     // 显示服务器返回的字符串
     $('#response').text(response);
    },
    error: function() {
     alert('提交失败，请重试。');  // 提示提交失败
    }
   });
  });
 </script>
</body>
</html>